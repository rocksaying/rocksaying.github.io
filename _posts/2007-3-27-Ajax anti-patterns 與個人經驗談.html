---
title: Ajax anti-patterns 與個人經驗談
category: programming
old-category: JavaScript
tags: [ajax,webdev]
permalink: /archives/2917219.html
---
<div class="tags" style="display:none">ajax webdev</div>
<p>
《老子》有云「不善人者善人之資」。了解不適當與錯誤的方式，也是學習中重要的一環。在程式設計的領域中亦如是，好的設計方式會 patternalization ，壞的設計方式也會。Jack D Herrington 于 <a href="http://www-128.ibm.com/developerworks/xml/library/x-ajaxxml3/index.html">Ajax and XML: Five Ajax anti-patterns</a> 列舉了 5 種常見的 Ajax anti-patterns 。這5種確實常見，我個人也有不少經驗可與之聯繫。
</p>

<!--more-->
<h4><q>Polling on a timer when you don't need to</q></h4>
<p>
當你不需要定時輸詢時卻這麼做。我的經驗:
</p>
<ol>
<li><a href="{{ site.baseurl }}/archives/2086597.html">該不該用 while 檢查 readyState</a>。
</li>
<li>JavaScriptPhoto163 相冊下載工具第三版 (PHP + JavaScript 實作版本)<br/>
<q>Yahoo YU Library 並不使用 event notice 策略，而是使用 timer 輪詢。這種策略的效能表現並不好，類似用 while 輪詢。有時當我在 FireFox 上運行第二版下載工具下載大量影像並設定同時工作數大於 10 時， FireFox 會出現嚴重的行程鎖死現象</q>。
</li>
</ol>

<h4><q>Not inspecting the return results in the callback</q></h4>
<p>
不檢查 callback 回傳之狀態。在非同步模式下，我們必須常常提醒自己，天地不是以我為中心運轉，我要的資源不會總是剛好等著我取用。我的經驗:
</p>
<ol>
<li>
輕忽回傳狀態其實是初次接觸非同步多工作業模式者常犯的錯誤，因為他們還慣於同步模式下的線性思考方式。相關問題在 C/C++ 多工作業編程中常有深入探討: <a href="{{ site.baseurl }}/archives/2333878.html">select() - I/O Multiplexer</a>
</li>
<li>
<a href="{{ site.baseurl }}/archives/2716520.html">Load and Execute JavaScript on Demand</a>、<a href="{{ site.baseurl }}/archives/2741057.html">Load and Execute JavaScript on Demand, by createElement</a>
</li>
</ol>


<h4><q>Passing complex XML when HTML would be better</q></h4>
<p>
需要 HTML 時卻傳遞一個複合的 XML 。我的經驗: 基本的事物反而常常被忽略，不要忘了 HTML/XHTML 與 XML 一樣是一份基於標籤語言的結構化文件，而 HTML 的好處在於瀏覽器可以直接呈現視覺效果。
</p>


<h4><q>Passing XML when you should pass JavaScript code</q></h4>
<p>
可以傳遞 JavaScript 程式碼時卻傳遞 XML。我的經驗:
</p>
<ol>
<li><a href="{{ site.baseurl }}/archives/2045155.html">JSON速寫</a><br/>
<q>透過 XML 在網路間交換資料，真的很方便。只是 XML 有時候用起來有點小題大作的感覺。有時為了傳送很少的資料，卻要用上十幾倍於實際交換資料的記憶體空間</q>。
</li>
<li><a href="{{ site.baseurl }}/archives/2749975.html">網路服務與純 JavaScript 應用之 JSON 資料包裹解決方案</a>、<a href="{{ site.baseurl }}/archives/2760853.html">網路服務與純 JavaScript 應用之 JSON 資料包裹解決方案, Google的方式</a><br/>
<q>為了讓使用者能建立純 JavaScript 應用， Google 就提供了將 GData 資料內容改用 JSON 格式包裹在 JavaScript 程式碼中的服務方式</q>。
</li>
</ol>

<h4><q>Doing too much on the server</q></h4>
<p>
讓伺服端做太多事。我的經驗:
</p>
<ol>
<li><a href="{{ site.baseurl }}/archives/2854997.html">以動態網頁方式排序網頁的表格內容</a><br/>
<q>只是我很懶，不想為了視覺效果去修改統計程式，更不想為了更新排序結果而要伺服端再回傳一次頁面。於是我打算以動態網頁的方式，直接用 JavaScript 對網頁上的統計表格排序</q>。
</li>
</ol><div class="note">樂多舊網址: http://blog.roodo.com/rocksaying/archives/2917219.html</div>