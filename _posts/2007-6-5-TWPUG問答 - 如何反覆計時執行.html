---
title: TWPUG問答 - 如何反覆計時執行
category: programming
old-category: PHP
tags: [php]
---
<div class="tags" style="display:none">Tags: php</div>
<p><a href="http://twpug.net/modules/newbb/viewtopic.php?topic_id=2652&forum=13">she96965 問</a>: <q>我想要過三秒後執行一次函數，再過三秒在執行一次，一直反覆一直反覆</q>。
</p>
<p>
答: 用 <a href="http://tw.php.net/manual/en/function.sleep.php">sleep()</a> 。另一方面， PHP 有一個最大執行時間的限制，故尚須配合 <a href="http://tw.php.net/manual/en/function.set-time-limit.php">set_time_limit()</a> 重置最大執行時間的計時。
</p>

<!--more-->
<pre class="highlight"><code><span class="cp">&lt;?php</span>
<span class="k">echo</span> <span class="nb">date</span><span class="p">(</span><span class="s1">'h:i:s'</span><span class="p">)</span> <span class="o">.</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="k">while</span> <span class="p">(</span><span class="kc">true</span><span class="p">)</span> <span class="p">{</span>
    <span class="nb">set_time_limit</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span> <span class="c1">//reset execute time limit, greater than sleep time.
</span>    <span class="nb">sleep</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span>
    <span class="k">echo</span> <span class="nb">date</span><span class="p">(</span><span class="s1">'h:i:s'</span><span class="p">)</span> <span class="o">.</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="p">}</span>
<span class="cp">?&gt;</span>
</code></pre>
<div class="note">樂多舊網址: http://blog.roodo.com/rocksaying/archives/3407615.html</div>
<div class="roodo-comments"><hr/><h6>樂多舊回應</h6>
<blockquote class="roodo-comment">
<div class="roodo-comment-author">jenny@nuk.edu.tw(陳錦麗) (#comment-10862359)</div>
<div class="roodo-comment-date">Sun, 10 Jun 2007 22:06:00 +0800</div>
<div class="roodo-comment-text">無意中看到您寫的(失焦的競爭優勢)一文<br/>我想在論文中引用其中的觀點<br/>可否?請答覆<br/>謝謝<br/>	</div>
</blockquote>
<blockquote class="roodo-comment">
<div class="roodo-comment-author">未留名 (#comment-10876899)</div>
<div class="roodo-comment-date">Mon, 11 Jun 2007 16:39:33 +0800</div>
<div class="roodo-comment-text">按照一般的引用方式引用即可。請自便。<br/><br/>另，你回覆在這篇文章並不恰當。因為與這篇文章的主題不符，故我三天後將清除此回應。<br/>	</div>
</blockquote>
</div>
