---
title: A Note of HTML Form and XForm
category: programming
old-category: Programming
tags: [xml,xform,ajax,web design]
permalink: /archives/5107059.html
---
<div class="tags" style="display:none">Tags: xml xform ajax web_design</div>
<p>
如何分割 "資料"(Data)與 "表單外觀"(呈現層,Presentation)。
</p>
<p>
HTML Form 之中，資料與表單元件的陣述混雜在一起，增加文件編寫與閱讀複雜度。此複雜度不僅是針對人工輸入與閱讀，對應用軟體亦然，例如網頁編輯工具、Famework 工具等等。混雜的陣述方式，增加了前述工具的開發者之工作 - 編程難，除錯難 。
</p>

<!--more-->
<h4>
傳統的 HTML Form
</h4> 

<h5>
Without Data
</h5>

<pre class="highlight"><code><span class="nt">&lt;form</span> <span class="na">id=</span><span class="s">"form1"</span> <span class="na">name=</span><span class="s">"form1"</span> <span class="na">method=</span><span class="s">"post"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;label</span> <span class="err">for"fname"</span><span class="nt">&gt;</span>FirstName<span class="nt">&lt;/label&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">"fname"</span> <span class="na">name=</span><span class="s">"fname"</span> <span class="na">value=</span><span class="s">""</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;br/&gt;</span>

    <span class="nt">&lt;label</span> <span class="err">for"lname"</span><span class="nt">&gt;</span>LastName<span class="nt">&lt;/label&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">"lname"</span> <span class="na">name=</span><span class="s">"lname"</span> <span class="na">value=</span><span class="s">""</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;button</span> <span class="na">type=</span><span class="s">"submit"</span><span class="nt">&gt;</span>Submit<span class="nt">&lt;/button&gt;</span>
<span class="nt">&lt;/form&gt;</span>
</code></pre>


<h5>
With Data
</h5>

<pre class="highlight"><code><span class="nt">&lt;form</span> <span class="na">id=</span><span class="s">"form1"</span> <span class="na">name=</span><span class="s">"form1"</span> <span class="na">method=</span><span class="s">"post"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;label</span> <span class="err">for"fname"</span><span class="nt">&gt;</span>FirstName<span class="nt">&lt;/label&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">"fname"</span> <span class="na">name=</span><span class="s">"fname"</span> <span class="na">value=</span><span class="s">"Peter"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;br/&gt;</span>

    <span class="nt">&lt;label</span> <span class="err">for"lname"</span><span class="nt">&gt;</span>LastName<span class="nt">&lt;/label&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">"lname"</span> <span class="na">name=</span><span class="s">"lname"</span> <span class="na">value=</span><span class="s">"Parker"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;button</span> <span class="na">type=</span><span class="s">"submit"</span><span class="nt">&gt;</span>Submit<span class="nt">&lt;/button&gt;</span>
<span class="nt">&lt;/form&gt;</span>
</code></pre>


<p>
要一眼看出資料在哪，還真是傷眼力。
</p>

<h4>
透過 JavaScript 分割 HTML Form 的資料與表單元件
</h4>
<p>
資料的文件格式是 JSON。
</p>

<pre class="highlight"><code><span class="nt">&lt;form</span> <span class="na">id=</span><span class="s">"form1"</span> <span class="na">name=</span><span class="s">"form1"</span> <span class="na">method=</span><span class="s">"post"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;label</span> <span class="err">for"fname"</span><span class="nt">&gt;</span>FirstName<span class="nt">&lt;/label&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">"fname"</span> <span class="na">name=</span><span class="s">"fname"</span> <span class="na">value=</span><span class="s">""</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;br/&gt;</span>

    <span class="nt">&lt;label</span> <span class="err">for"lname"</span><span class="nt">&gt;</span>LastName<span class="nt">&lt;/label&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">"lname"</span> <span class="na">name=</span><span class="s">"lname"</span> <span class="na">value=</span><span class="s">""</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;button</span> <span class="na">type=</span><span class="s">"submit"</span><span class="nt">&gt;</span>Submit<span class="nt">&lt;/button&gt;</span>
<span class="nt">&lt;/form&gt;</span>

<span class="nt">&lt;script</span> <span class="na">type=</span><span class="s">"text/javascript"</span><span class="nt">&gt;</span>
    /* Data */
    var form1 = {
        fname: 'Peter',
        lname: 'Parker'
    }; 

    for (var controlId in form1) {
        var control = document.getElementById(controlId);
        control.value = form1[controlId];
        /*
        This is an example.
        It cannot set the value of Select, Checkbox, Radio, etc.
        To set up the value of any type of controls, we need more codes.
        */ 
    }
<span class="nt">&lt;/script&gt;</span>
</code></pre>


<h4>
XForm way
</h4>
<p>
資料的文件格式是 XML。
</p>

<pre class="highlight"><code><span class="nt">&lt;xforms&gt;</span>

<span class="nt">&lt;model&gt;</span>
  <span class="nt">&lt;instance&gt;</span>
  <span class="c">&lt;!-- Data (XML document)--&gt;</span>
  <span class="nt">&lt;person&gt;</span>
    <span class="nt">&lt;fname&gt;</span>Peter<span class="nt">&lt;/fname&gt;</span>
    <span class="nt">&lt;lname/&gt;</span>Parker<span class="nt">&lt;/lname&gt;</span>
  <span class="nt">&lt;/person&gt;</span>
 <span class="nt">&lt;/instance&gt;</span>

 <span class="nt">&lt;submission</span> <span class="na">id=</span><span class="s">"form1"</span> <span class="na">method=</span><span class="s">"post"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/model&gt;</span>

<span class="c">&lt;!-- Presentation --&gt;</span>
<span class="nt">&lt;input</span> <span class="na">ref=</span><span class="s">"fname"</span><span class="nt">&gt;</span>
<span class="nt">&lt;label&gt;</span>First Name<span class="nt">&lt;/label&gt;</span>
<span class="nt">&lt;/input&gt;</span>

<span class="nt">&lt;input</span> <span class="na">ref=</span><span class="s">"lname"</span><span class="nt">&gt;</span>
<span class="nt">&lt;label&gt;</span>Last Name<span class="nt">&lt;/label&gt;</span>
<span class="nt">&lt;/input&gt;</span>

<span class="nt">&lt;submit</span> <span class="na">submission=</span><span class="s">"form1"</span><span class="nt">&gt;</span>
<span class="nt">&lt;label&gt;</span>Submit<span class="nt">&lt;/label&gt;</span>
<span class="nt">&lt;/submit&gt;</span>

<span class="nt">&lt;/xforms&gt;</span>
</code></pre>


<h4>
Reference about XForm
</h4>
<ul>
    <li><a href="http://www-128.ibm.com/developerworks/xml/library/x-ajaxxml9/">Ajax and XML: Ajax for forms</a> - Use Ajax techniques to create input forms</li>
    <li><a href="http://www.w3schools.com/xforms/default.asp">XForms Tutorial</a></li>
    <li><a href="http://www.w3.org/TR/xforms/">XForms 1.0 (Third Edition)</a> - W3C Recommendation 29 October 2007</li>
</ul>
<h6>相關文章</h6>
<ul>
<li><a href="http://rocksaying.tw/archives/5147001.html">How do you write template? XSLT, PHP or RoR?</a></li>
</ul>
<div class="note">樂多舊網址: http://blog.roodo.com/rocksaying/archives/5107059.html</div>
<div class="roodo-comments"><hr/><h6>樂多舊回應</h6>
<blockquote class="roodo-comment">
<div class="roodo-comment-author">HACGIS@gmail.com(tokimeki) (#comment-15618617)</div>
<div class="roodo-comment-date">Fri, 25 Jan 2008 01:36:38 +0800</div>
<div class="roodo-comment-text">不知道目前有哪些瀏覽器已經預計要支援了？<br/>	</div>
</blockquote>
<blockquote class="roodo-comment">
<div class="roodo-comment-author">未留名 (#comment-15621733)</div>
<div class="roodo-comment-date">Fri, 25 Jan 2008 16:53:10 +0800</div>
<div class="roodo-comment-text">好問題。<br/><br/>事實是殘酷的，主流的兩大客戶端瀏覽器 IE 和 Firefox 目前都不內建支援，需要下載 plug-in。內建 XForm 應該是下次大改版的事。<br/><br/>倒是企業用的文件整合平台支援得相當快，例如 IBM Lotus 系統。<br/><br/>現在分離資料與表單的方式，主要是以 JavaScript 處理。<br/><br/>關於軟體支援，在 W3C 和 Wiki 上都有相當完整的參考列表。<br/>1. <a href="http://en.wikipedia.org/wiki/XForms">XForms@wikipedia</a><br/><br/>2. <a href="http://www.w3.org/MarkUp/Forms/wiki/XForms_Implementations">XForms Implementations</a><br/>	</div>
</blockquote>
</div>
